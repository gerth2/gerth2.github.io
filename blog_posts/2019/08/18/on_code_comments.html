<!DOCTYPE html>
<html lang="en">

    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [['$','$'], ['\\(','\\)']],
          processEscapes: true
        }
      });
      </script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
  
      <script src="https://d3js.org/d3.v3.js"></script>
      <script src="/assets/js/function-plot.js"></script><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Good Comments | Tricking Rocks to Think</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Good Comments" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Thoughts on software development, leadership, and sundry other topics in the context of the FIRST robotics competition." />
<meta property="og:description" content="Thoughts on software development, leadership, and sundry other topics in the context of the FIRST robotics competition." />
<link rel="canonical" href="/blog_posts/2019/08/18/on_code_comments.html" />
<meta property="og:url" content="/blog_posts/2019/08/18/on_code_comments.html" />
<meta property="og:site_name" content="Tricking Rocks to Think" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-08-18T10:30:40-04:00" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"/blog_posts/2019/08/18/on_code_comments.html"},"url":"/blog_posts/2019/08/18/on_code_comments.html","description":"Thoughts on software development, leadership, and sundry other topics in the context of the FIRST robotics competition.","headline":"Good Comments","@type":"BlogPosting","dateModified":"2019-08-18T10:30:40-04:00","datePublished":"2019-08-18T10:30:40-04:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Tricking Rocks to Think" /></head>
<body>

    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" ><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Tricking Rocks to Think</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Good Comments</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2019-08-18T10:30:40-04:00" itemprop="datePublished">Aug 18, 2019
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p><img src="https://i.redd.it/fqq6ummu09431.png" alt="the 90 percent" /></p>

<p><em>source: reddit.com</em></p>

<h2 id="introduction">Introduction</h2>

<p>Code comments are one of those things that you have to see lots of wrong examples, before you get good at making them right.</p>

<p>Full disclosure - by most standards, I am <em>horrible</em> at writing code comments. However, my problem is the opposite that most newbies have - I write far too much in comments.</p>

<p>I’m hoping to share a tidbit of the wisdom I’ve gotten so far. Rather than corrupt young minds with my excessively verbose ways, I’m hoping we can sorta meet in the middle - get an idea for what “good” or “too much” might look like, and land somewhere in the vicinity of “optimal”.</p>

<p>All this ties back to a broader discussion of what “good code” is. It’s one sub-component of making sure your code is easily comprehensible, which allows for faster modification, which allows for faster delivery of functional software, which generally keeps the other subteams happy.</p>

<h2 id="what-to-comment-on">What to Comment On</h2>

<p>The first thing folks should know is that the text inside a comment needs to be helpful. The golden rule of commenting:</p>

<p><strong>COMMENTS SAY <em>WHY</em> THE CODE IS THE WAY IT IS, NEVER <em>WHAT</em> IT IS DOING</strong></p>

<p>The absolute worst form of code commenting, that I truly and utterly abhor:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">double</span> <span class="n">periodic</span><span class="p">(){</span>
    <span class="c1">//Here is the start of the function named "periodic"</span>

    <span class="c1">//I have declared two local variables named speed and encoderReading</span>
    <span class="kt">double</span> <span class="n">speed</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">encoderReading</span><span class="p">;</span>

    <span class="c1">//set encoderReading to the return value from the thing getSensorValue()</span>
    <span class="n">encoderReading</span> <span class="o">=</span> <span class="n">getSensorValue</span><span class="p">();</span>

    <span class="c1">//Divide encoderReading by ten and then multiply by fifty.</span>
    <span class="n">speed</span> <span class="o">=</span> <span class="n">encoderReading</span> <span class="o">/</span> <span class="mi">10</span> <span class="o">*</span> <span class="mi">60</span><span class="p">;</span>

    <span class="c1">//Return the value within the variable Speed to the caller function</span>
    <span class="k">return</span> <span class="n">speed</span><span class="p">;</span>

    <span class="c1">//This function is now done</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Well, ok. Maybe you’ve seen comments like these on the blog. But that’s different- when I explain <em>what</em> code is doing, it’s to help teach new people.</p>

<p>Production robot code is not the place to put tutorials on the nuances of Java/C++/Kotlin/insert-obscure-language-here.</p>

<p>The comments in the above example contain <em>literally</em> zero additional information. You are literally sucking up bits of storage on your PC’s hard drive with no added benefit. Even worse, you have written code that <em>appears</em> to have at least some volume of contents, but on closer inspection has <em>lied</em> about its usefulness.</p>

<p>Even worse, some of the comments have <em>wrong</em> information. You may laugh, but this happens all the time - developer A writes the code and the comment, developer B comes along and updates the code but not the comment. Then developer C is confused and frustrated.</p>

<p>And, believe it or not, often developers A, B, and C are the same person. I’ve been there.</p>

<p><img src="/assets/it_was_me.png" alt="it was me all the time" /></p>

<p><em>source: me.me or Stephen Hillenburg, you choose.</em></p>

<p>Please please please please please never ever ever write comments like this.</p>

<p>Here’s a much better approach:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">double</span> <span class="n">periodic</span><span class="p">(){</span>

    <span class="kt">double</span> <span class="n">speed</span><span class="p">;</span> <span class="c1">//Stores Speed in RPM</span>
    <span class="kt">double</span> <span class="n">encoderReading</span><span class="p">;</span> <span class="c1">//Stores encoder measured speed in pulses per second</span>

    <span class="c1">// Read all inputs</span>
    <span class="c1">// Sample from the encoders</span>
    <span class="n">encoderReading</span> <span class="o">=</span> <span class="n">getSensorValue</span><span class="p">();</span>

    <span class="c1">// Convert to RPM</span>
    <span class="c1">// Encoder is measuring a target which produces 10 pulses per revolution</span>
    <span class="c1">//  and speed is supposed to be per-minute, not per-second.</span>
    <span class="n">speed</span> <span class="o">=</span> <span class="n">encoderReading</span> <span class="o">/</span> <span class="mi">10</span> <span class="o">*</span> <span class="mi">60</span><span class="p">;</span>

    <span class="k">return</span> <span class="n">speed</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The comments are like a good tour guide in the art gallery - they never describe the actual painting itself, but rather give context to the author’s thought process, and how it connects to the broader culture and time in which it was created. Write your comments to be good tour guides to your own thought process, assumptions, and desires.</p>

<p>A good practice is to <a href="https://www.youtube.com/watch?v=eNZsWIzEhP4">always leave a note</a> when you still need to come back and finish something:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">double</span> <span class="n">periodic</span><span class="p">(){</span>
    <span class="k">if</span><span class="p">(</span><span class="n">condition1</span><span class="p">){</span>
        <span class="n">print</span><span class="p">(</span><span class="s">"Got condition 1!</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">//TODO</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This helps you and the next person recall that the code isn’t finished, and there will be more functionality. It also means that if you’re ever wondering “what else should I do?”, one quick answer is search for all occurrences of the string <code class="highlighter-rouge">TODO</code> in your code files. If you find <code class="highlighter-rouge">//TODO</code> comments, well, you’ve got something to do!</p>

<h2 id="ascii-aesthetics-for-visual-separation">ASCII-Aesthetics for Visual Separation</h2>

<p>I’ve been a fan of using comments, whitespace, and ascii art to visually separate different parts of a source code file, as I wish a user to see them separately. This means I’ll usually add some extra spaces between function definitions, maybe an extra newline here or there within a function to mark off different segments of execution.  It’s all about communication - if you want the reader to see two things together, remove whitespace. If you want them to see two things separately, add more whitespace.</p>

<p>For example:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span><span class="p">((</span><span class="n">condition1</span><span class="o">==</span><span class="mi">1</span><span class="o">&amp;&amp;</span><span class="n">condition2</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span><span class="o">||</span><span class="n">input3</span><span class="o">&gt;=</span><span class="mi">10</span><span class="p">){</span>
    <span class="n">do_the_thing</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<p>While this C code works just fine, I personally like to add a bit more whitespace to separate out the components of the <code class="highlighter-rouge">if()</code> statement condition, into the parts that a human more easily parses:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="n">condition1</span><span class="o">==</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">condition2</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="o">||</span> <span class="n">input3</span><span class="o">&gt;=</span><span class="mi">10</span> <span class="p">){</span>
    <span class="n">do_the_thing</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Not everyone is like me, though, and I’m not even super consistent with my own styles. Still, I feel there’s some value in visually separating things that are (somehow) separate, and visually aligning things which are (somehow) aligned. Communicating intent. That’s all we’re doing here.</p>

<p>When doing the same thing with comments, I’ve got some favorite ascii-art style ways of doing this visual separation as well:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//----------------------------------------------</span>
<span class="c1">// This is a block of comment, hard to miss</span>
<span class="c1">//----------------------------------------------</span>

<span class="c1">//&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span>
<span class="c1">// Here is another block, even harder to miss.</span>
<span class="c1">//&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span>

<span class="c1">//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span>
<span class="c1">//!! HERE IS A SUPER URGENT WARNING YOU CANNOT MISS !!</span>
<span class="c1">//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span>

<span class="c1">//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
<span class="c1">//~~ Here is a new section of code</span>
<span class="kt">int</span> <span class="n">myCode</span><span class="p">(){</span>
    <span class="n">print</span><span class="p">(</span><span class="s">"yay!"</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">42</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">//~~ Now the code is done.</span>
<span class="c1">//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
</code></pre></div></div>

<p>Feel free to take and tweak these as you prefer.</p>

<h2 id="standardization-strategies">Standardization strategies</h2>

<p>One of the key to writing good code is consistency - making similar things look similar makes your code way easier to read and comprehend, especially to someone who isn’t familiar with it. It helps them know that once they’ve learned one thing in the code, if they see it again, they don’t have to re-learn it.</p>

<p>A good chunk of this consistency is keeping the <em>quantity</em> of your comments level throughout the code. As a team, decide what an appropriate level is, and try to stick to it. Make note of it while reviewing each other’s code, and add or remove as needed to keep the level even.</p>

<p>Once nice practice is to put a description block above every major public function or method. Include key information, such as a description of the function’s usage, what its inputs are supposed to be, what its return value is, any global variables it modifies, etc.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//***************************************************************</span>
<span class="c1">//** Function Name: myCode</span>
<span class="c1">//** Description: Displays a happy message, and calculates</span>
<span class="c1">//**               the meaning of life.</span>
<span class="c1">//** Inputs: None</span>
<span class="c1">//** Outputs: Returns the meaning to life, in an integer.</span>
<span class="c1">//** Globals: No interaction</span>
<span class="c1">//***************************************************************</span>
<span class="kt">int</span> <span class="n">myCode</span><span class="p">(){</span>
    <span class="n">print</span><span class="p">(</span><span class="s">"yay!"</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">42</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>If you are super careful with how you do something like this, you can use specialized programs like <a href="https://en.wikipedia.org/wiki/Javadoc">Javadoc</a> or <a href="https://en.wikipedia.org/wiki/Doxygen">Doxygen</a> to convert these comment blocks into some very nice looking and easy-to-navigate HTML, producing non-code documentation of how your code works. It’s super useful if someone else has to use your code (like if you were writing <em>for</em> WPI), but is also just nice to have as a reference anyway.</p>

<p>One closing note - I always recommend using proper grammar, punctuation, capitalization, spelling, etc. when writing comments. Even if your meaning is communicated without these, taking the time on the comments indicates you also took time writing the code, and are competent at your job. Which, presumably, is the message you’d like to communicate outward.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Code comments are a necessity of writing code which is easily comprehended by humans. Since we want our code to be first and foremost understandable to humans, it makes sense to have good comments. Hopefully you’ve got a few new, good ideas on how to do your commenting. Try them out yourself next time you write some software, talk about it with your team, and let this lead you toward better code!</p>

  </div><a class="u-url" href="/blog_posts/2019/08/18/on_code_comments.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Tricking Rocks to Think</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Tricking Rocks to Think</li><li><a class="u-email" href="mailto:webmaster@trickingrockstothink.com">webmaster@trickingrockstothink.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/gerth2"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">gerth2</span></a></li><li><a href="https://www.linkedin.com/in/christopher-gerth-7b8b52126"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#linkedin"></use></svg> <span class="username">christopher-gerth-7b8b52126</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Thoughts on software development, leadership, and sundry other topics in the context of the FIRST robotics competition.</p>
      </div>
    </div>

  </div>

</footer>
<!-- Global site tag (gtag.js) - Google Analytics -->
<!-- <script async src="https://www.googletagmanager.com/gtag/js?id=UA-140459603-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-140459603-1');
</script> -->


  </body>

</html>
